# 1 "src/arm/BBAI_BB-BONE-LCD7-01-00A3.dts"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "src/arm/BBAI_BB-BONE-LCD7-01-00A3.dts"





/dts-v1/;
/plugin/;

# 1 "include/dt-bindings/interrupt-controller/irq.h" 1
# 10 "src/arm/BBAI_BB-BONE-LCD7-01-00A3.dts" 2
# 1 "include/dt-bindings/gpio/gpio.h" 1
# 11 "src/arm/BBAI_BB-BONE-LCD7-01-00A3.dts" 2
# 1 "include/dt-bindings/pinctrl/dra.h" 1
# 12 "src/arm/BBAI_BB-BONE-LCD7-01-00A3.dts" 2




&{/chosen} {
 overlays {
  BBAI_BB-BONE-LCD7-01-00A3.bb.org-overlays = "Wed Jun 19 07:10:02 2024";
 };
};

/ {
 fragment@2 {
  target = <&dra7_pmx_core>;
  __overlay__ {
   cape_pins_default: cape_pins_default {
    pinctrl-single,pins = <
     (((0x379C) & 0xffff) - 0x3400) (0xe)
     (((0x37A0) & 0xffff) - 0x3400) (0xe)
     (((0x378C) & 0xffff) - 0x3400) (0xe)
     (((0x3790) & 0xffff) - 0x3400) (0xe)
     (((0x36EC) & 0xffff) - 0x3400) (0xe)
     (((0x36F0) & 0xffff) - 0x3400) (0xe)
     (((0x3698) & 0xffff) - 0x3400) (0xe)
     (((0x36E8) & 0xffff) - 0x3400) (0xe)
     (((0x3510) & 0xffff) - 0x3400) (0xe)
     (((0x350C) & 0xffff) - 0x3400) (0xe)
     (((0x3590) & 0xffff) - 0x3400) (((1 << 18) | (1 << 16)) | 0xc)
     (((0x3598) & 0xffff) - 0x3400) (0xe)
     (((0x3570) & 0xffff) - 0x3400) (0xe)
     (((0x35B4) & 0xffff) - 0x3400) (0xd)
     (((0x35BC) & 0xffff) - 0x3400) (0xd)
     (((0x3624) & 0xffff) - 0x3400) (0xe)
     (((0x3588) & 0xffff) - 0x3400) (((1 << 18) | (1 << 16)) | 0xc)
     (((0x358C) & 0xffff) - 0x3400) (((1 << 18) | (1 << 16)) | 0xc)
     (((0x3780) & 0xffff) - 0x3400) (0xe)
     (((0x377C) & 0xffff) - 0x3400) (0xe)
     (((0x3798) & 0xffff) - 0x3400) (0xe)
     (((0x3794) & 0xffff) - 0x3400) (0xe)
     (((0x3788) & 0xffff) - 0x3400) (0xe)
     (((0x3784) & 0xffff) - 0x3400) (0xe)
     (((0x35B8) & 0xffff) - 0x3400) (0xd)

     (((0x3628) & 0xffff) - 0x3400) (0xe)

     (((0x362C) & 0xffff) - 0x3400) (0xe)

     (((0x3630) & 0xffff) - 0x3400) (0xe)

     (((0x3634) & 0xffff) - 0x3400) (0xe)

     (((0x373C) & 0xffff) - 0x3400) (0xe)

     (((0x3740) & 0xffff) - 0x3400) (0xe)

     (((0x34E8) & 0xffff) - 0x3400) (0xe)

     (((0x3564) & 0xffff) - 0x3400) (0xe)

     (((0x34E4) & 0xffff) - 0x3400) (0xe)

     (((0x3568) & 0xffff) - 0x3400) (0xe)

     (((0x3738) & 0xffff) - 0x3400) (0xe)
     (((0x3600) & 0xffff) - 0x3400) (0xe)
     (((0x3734) & 0xffff) - 0x3400) (0xe)







     (((0x361C) & 0xffff) - 0x3400) (0xe)

     (((0x3638) & 0xffff) - 0x3400) (0xe)
     (((0x372C) & 0xffff) - 0x3400) (0xe)
     (((0x3620) & 0xffff) - 0x3400) (0xe)

     (((0x3730) & 0xffff) - 0x3400) (0xe)

     (((0x3514) & 0xffff) - 0x3400) (0xe)
     (((0x35B0) & 0xffff) - 0x3400) (0xd)
     (((0x37CC) & 0xffff) - 0x3400) (0xe)
     (((0x36B8) & 0xffff) - 0x3400) (0xe)
     (((0x37C8) & 0xffff) - 0x3400) (0xe)
     (((0x36B4) & 0xffff) - 0x3400) (0xe)
     (((0x3440) & 0xffff) - 0x3400) (((0 << 16) | (1 << 18) | (1 << 17)) | 0x7)
     (((0x357C) & 0xffff) - 0x3400) (((0 << 16) | (1 << 18) | (1 << 17)) | 0xc)
     (((0x3444) & 0xffff) - 0x3400) (((0 << 16) | (1 << 18) | (1 << 17)) | 0x7)
     (((0x3578) & 0xffff) - 0x3400) (((0 << 16) | (1 << 18) | (1 << 17)) | 0xc)
     (((0x34F0) & 0xffff) - 0x3400) (0xe)
     (((0x37C4) & 0xffff) - 0x3400) (0xe)

     (((0x37C0) & 0xffff) - 0x3400) (0xe)
     (((0x37B4) & 0xffff) - 0x3400) (0xe)
     (((0x368C) & 0xffff) - 0x3400) (0xe)
     (((0x3694) & 0xffff) - 0x3400) (0xe)
     (((0x3688) & 0xffff) - 0x3400) (0xe)
     (((0x3544) & 0xffff) - 0x3400) (0xe)
     (((0x35A0) & 0xffff) - 0x3400) (0xe)
     (((0x36B0) & 0xffff) - 0x3400) (0xe)
     (((0x36E0) & 0xffff) - 0x3400) (0xe)
     (((0x36D8) & 0xffff) - 0x3400) (0xe)
     (((0x36A8) & 0xffff) - 0x3400) (0xe)
     (((0x36DC) & 0xffff) - 0x3400) (0xe)
     (((0x36D4) & 0xffff) - 0x3400) (0xe)
     (((0x36A4) & 0xffff) - 0x3400) (0xe)
     (((0x36A0) & 0xffff) - 0x3400) (0xe)
     (((0x3580) & 0xffff) - 0x3400) (0xe)
     (((0x36E4) & 0xffff) - 0x3400) (0xe)
     (((0x359C) & 0xffff) - 0x3400) (0xe)
    >;
   };

   bb_lcd_led_pins: pinmux_bb_lcd_led_pins {
    pinctrl-single,pins = <
     (((0x36AC) & 0xffff) - 0x3400) (((0 << 16) | (1 << 18) | (1 << 17)) | 0xe)
    >;
   };

   bb_lcd_pwm_backlight_pins: pinmux_bb_lcd_pwm_backlight_pins {
    pinctrl-single,pins = <
     (((0x35AC) & 0xffff) - 0x3400) ((0) | 0xa)
    >;
   };

   bb_lcd_en_pins: pinmux_bb_lcd_en_pins {
    pinctrl-single,pins = <
     (((0x369C) & 0xffff) - 0x3400) (((1 << 17)) | 0xe)
    >;
   };

   bb_lcd_lcd_pins: pinmux_bb_lcd_lcd_pins {
    pinctrl-single,pins = <
     (((0x35DC) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35E0) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35E4) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35E8) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35EC) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35F0) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35F4) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35F8) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35FC) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3600) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3604) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3608) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x360C) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3610) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3614) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x3618) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)

     (((0x35D8) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35D4) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35C8) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)
     (((0x35CC) & 0xffff) - 0x3400) ((0 | (1 << 16)) | 0x0)


     (((0x373C) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3740) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x34E8) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3564) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x34E4) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3568) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3738) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3734) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x361C) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3638) & 0xffff) - 0x3400) ((1 << 16) | 0xf)

     (((0x3628) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x362C) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3630) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
     (((0x3634) & 0xffff) - 0x3400) ((1 << 16) | 0xf)
    >;
   };
  };
 };

 fragment@3 {
  target = <&epwmss2>;
  __overlay__ {
   status = "okay";
  };
 };

 fragment@4 {
  target = <&ehrpwm2>;
  __overlay__ {
   pinctrl-names = "default";
   pinctrl-0 = <&bb_lcd_pwm_backlight_pins>;
   status = "okay";
  };
 };

 fragment@5 {
  target = <&dss>;
  __overlay__ {
   pinctrl-names = "default";
   pinctrl-0 = <&bb_lcd_lcd_pins>;
   status = "okay";

   port {
    #address-cells = <1>;
    #size-cells = <0>;

    dpi_out: endpoint@0 {
     data-lines = <16>;
     remote-endpoint = <&lcd_in>;
    };
   };
  };
 };

 fragment@6 {
  target = <&i2c1>;
  __overlay__ {
   stmpe811@41 {
    stmpe_touchscreen {
     status = "okay";
     compatible = "st,stmpe-ts";

     st,ave-ctrl = <3>;

     st,fraction-z = <7>;




     st,i-drive = <1>;

     st,settling = <3>;

     st,touch-det-delay = <5>;

     touchscreen-offset-x=<100>;
     touchscreen-offset-y=<100>;


     touchscreen-inverted-y = <1>;

    };
   };
  };
 };

 fragment@7 {
  target-path="/";
  __overlay__ {

   aliases {
    display0 = &lcd0;
   };

   lcd0_bl: backlight {
    status = "okay";
    compatible = "pwm-backlight";
    pwms = <&ehrpwm2 0 500000 0>;
    brightness-levels = <
     0 1 2 3 4 5 6 7 8 9
     10 11 12 13 14 15 16 17 18 19
     20 21 22 23 24 25 26 27 28 29
     30 31 32 33 34 35 36 37 38 39
     40 41 42 43 44 45 46 47 48 49
     50 51 52 53 54 55 56 57 58 59
     60 61 62 63 64 65 66 67 68 69
     70 71 72 73 74 75 76 77 78 79
     80 81 82 83 84 85 86 87 88 89
     90 91 92 93 94 95 96 97 98 99
     100
    >;
    default-brightness-level = <100>;
   };

   lcd0: display@0 {
    compatible = "panel-dpi";
    label = "lcd";
    status = "okay";

    backlight = <&lcd0_bl>;

    pinctrl-names = "default";
    pinctrl-0 = <&bb_lcd_en_pins>;
    enable-gpios = <&gpio6 19 0>;

    port {
     lcd_in: endpoint {
      remote-endpoint = <&dpi_out>;
     };
    };

    panel-timing {
     clock-frequency = <30000000>;
     de-active = <1>;
     hactive = <800>;
     hback-porch = <40>;
     hfront-porch = <40>;
     hsync-active = <0>;
     hsync-len = <3>;
     pixelclk-active = <0>;
     vactive = <480>;
     vback-porch = <30>;
     vfront-porch = <13>;
     vsync-active = <0>;
     vsync-len = <3>;
    };
   };

   gpio-leds-cape-lcd {
    compatible = "gpio-leds";
    pinctrl-names = "default";
    pinctrl-0 = <&bb_lcd_led_pins>;

    lcd-led0 {
     label = "lcd:green:usr0";
     gpios = <&gpio5 0 0>;
     linux,default-trigger = "heartbeat";
     default-state = "off";
    };
   };
  };
 };
};
